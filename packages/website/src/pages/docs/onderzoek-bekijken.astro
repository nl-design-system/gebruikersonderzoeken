---
import CenterColumnLayout from '@layouts/center-column.astro';
import { getOnderzoekenByTheme } from '@utils/themes';
import { getCollection } from 'astro:content';

const themes = await getCollection('themes')
  .then((themes) =>
    themes.map(async (theme) => ({
      ...theme,
      items: await getOnderzoekenByTheme(theme.id),
    })),
  )
  .then((promises) => Promise.all(promises));
---

<CenterColumnLayout>
  <p>Onderzoeken bekijken</p>
  <ul>
    {
      themes.map((theme) => (
        <li>
          <a class="nl-link" href={`/docs/thema/${theme.id}`}>
            {theme.data.title} ({theme.items.length})
          </a>
        </li>
      ))
    }
  </ul>
</CenterColumnLayout>
